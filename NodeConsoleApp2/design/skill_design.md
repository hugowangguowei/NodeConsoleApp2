# 技能系统设计文档 (Skill System Design)

## 1. 技能综述 (Overview)

本游戏的技能系统构建于经典的 **西方奇幻 (Western Fantasy)** 背景之上。
技能是玩家与敌人交互的主要手段，也是构建角色流派 (Build) 的核心要素。

*   **核心理念**: 技能不仅仅是伤害输出的手段，更是策略执行的工具。
*   **技能类型**:
    *   **攻击型 (Offensive)**: 削减敌人 HP 或破坏护甲。
    *   **防御型 (Defensive)**: 增加临时护甲、格挡伤害或进行回复。
    *   **辅助/控制型 (Support/Control)**: 施加 Buff (增益) 或 Debuff (减益)，改变战斗节奏。
*   **资源消耗**: 所有技能均消耗行动力 (AP)。强力技能通常消耗更多 AP 或有冷却限制。

---

## 2. 技能体系架构 (Skill Architecture)

技能体系主要分为三大主系，下设 7 个具体的战术流派。此外，技能根据获取难度和强度划分为 5 个稀有度等级。

### 2.1 近战系 (Melee Arts) - 钢铁与肉体
强调物理对抗，直接作用于敌人的护甲与肉体。

*   **流派 A: 重装猛攻 (Juggernaut / Smasher)**
    *   *特点*: 高伤害，高 AP 消耗，专注于 **[破甲]** 和 **[眩晕]**。
    *   *核心逻辑*: 依靠蛮力摧毁敌人的防御，为后续攻击打开缺口。
*   **流派 B: 铁壁守卫 (Guardian / Tank)**
    *   *特点*: 护甲堆叠，反击，生存。
    *   *核心逻辑*: 通过 **[护甲回复]** 和 **[格挡]** 承受伤害，利用反击造成伤害。
*   **流派 C: 猩红剑术 (Duelist / Bleeder)**
    *   *特点*: 暴击，流血，多段攻击。
    *   *核心逻辑*: 绕过高护甲部位，或通过 **[流血 (Bleed)]** 造成持续真实伤害。

### 2.2 远程系 (Ranged Arts) - 速度与精准
强调技巧与灵动，擅长点杀特定部位和控制节奏。

*   **流派 D: 极速游侠 (Ranger / Speedster)**
    *   *特点*: 低 AP 消耗，行动力回复，攻速堆叠。
    *   *核心逻辑*: "天下武功唯快不破"，单回合内打出多次攻击，触发多次特效。
*   **流派 E: 精密狙击 (Sniper / Weakness)**
    *   *特点*: 必中，穿透，弱点打击。
    *   *核心逻辑*: 攻击具有 **[弱点 (Weakness)]** 属性的部位时伤害倍增，甚至无视护甲。

### 2.3 魔法系 (Arcane Arts) - 元素与神圣
强调超自然力量，擅长处理复杂战况和改变状态。

*   **流派 F: 元素毁灭 (Elementalist / Nuker)**
    *   *特点*: 属性伤害 (火/冰/雷)，状态异常。
    *   *核心逻辑*: **[燃烧]** 持续扣血，**[冰冻]** 降低速度，**[感电]** 增加受到的伤害。
*   **流派 G: 神圣祝祷 (Cleric / Buffer)**
    *   *特点*: 治疗，净化，强力 Buff。
    *   *核心逻辑*: 维持自身健康状态，不仅是回血，更包括 **[净化 Debuff]** 和 **[属性增强]**。

### 2.4 技能稀有度 (Skill Rarity)

技能按稀缺度和强度分为 5 个等级，稀有度越高的技能越难获取（如通过击败 Boss 或精英怪掉落），且通常具有决定性的战场影响力。

*   **Tier 1: 普通 (Common)** - 灰色
    *   基础技能，角色初始携带或在早期关卡大量掉落。通常作为填充 AP 的手段。
*   **Tier 2: 稀有 (Uncommon)** - 绿色
    *   进阶技能，具备一定的特效（如流血、破甲）。是构建流派的基础组件。
*   **Tier 3: 卓越 (Rare)** - 蓝色
    *   核心技能，数值优秀或机制独特。通常决定了玩家战斗风格的走向。
*   **Tier 4: 史诗 (Epic)** - 紫色
    *   强力技能，通常在特定流派中能产生质变效果。获取途径有限（如关卡 20+ 或商店高价购买）。
*   **Tier 5: 传说 (Legendary)** - 金色
    *   终极技能，拥有扭转战局的能力（如无敌、全屏控制）。极其稀有，通常来自 Boss 战利品或隐藏事件。

---

## 3. 详细技能示例 (Skill Examples)

以下提供了完整的技能库示例，分为 **近战**、**远程**、**魔法** 三大系别，包含全部 7 个流派的各稀有度技能。
*(注: AP = 行动点消耗, U = Uncommon, R = Rare, E = Epic, L = Legendary)*

### 3.1 近战系 (Melee Arts)

#### 流派 A: 重装猛攻 (Juggernaut)
*以力破巧，专注于高伤害与硬控制。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **重锤挥击 (Heavy Swing)** | 普通 | 3 | - | 对选中部位造成 120% 物理伤害。若目标该部位护甲 > 0，伤害修正为 130%。 | 基础破甲手段。 |
| **盾牌猛击 (Shield Bash)** | 普通 | 3 | - | 对躯干造成少量伤害，并有 40% 概率使敌人下回合 [眩晕]。 | 控制高威胁敌人，打断节奏。 |
| **蛮牛头槌 (Headbutt)** | 普通 | 2 | - | 自身受到 5 点反噬伤害，对敌人头部造成 15 点物理伤害并有 25% 概率 [眩晕]。 | 伤敌一千自损三百的低费控制。 |
| **野蛮冲撞 (Savage Charge)** | 稀有 | 4 | 重锤挥击 | 对躯干造成中等伤害。如果此攻击令护甲归零，则击退敌人（下回合速度 -10）。 | 初始化战场节奏，压制高速敌人。 |
| **碎颅重击 (Skull Cracker)** | 稀有 | 4 | 蛮牛头槌 | 对头部造成 150% 物理伤害。若头部有护甲，额外造成 30 点破甲伤害。 | 针对重头盔敌人的专项打击。 |
| **震荡波 (Shockwave)** | 卓越 | 4 | 野蛮冲撞 | 猛击地面，对敌人所有部位造成少量伤害并减少其 10 点速度 (1回合)。 | AOE 减速，用于应对多部位护甲敌人。 |
| **处决 (Execute)** | 卓越 | 3 | 碎颅重击 | 只能对 HP < 30% 的目标使用。造成 300% 的巨额真实伤害。 | 斩杀技能，快速结束战斗。 |
| **大地震击 (Earthquake)** | 史诗 | 5 | 震荡波 | 对所有部位造成 40 点破甲伤害，并有 50% 概率对头部造成 [眩晕]。 | 强力开团技能，剥离敌人护甲。 |
| **狂暴姿态 (Berserk)** | 史诗 | 3 | 处决 | [Buff] 下 2 回合造成的伤害提升 50%，但自身所有部位护甲减少 50%。 | 爆发阶段使用，舍弃防御换取输出。 |
| **诸神黄昏 (Ragnarok)** | 传说 | 6 | 大地震击 | 对所有部位造成毁灭性打击 (200% ATK)，且该攻击具有 100% 的破甲效率。 | 终极毁灭技。 |

#### 流派 B: 铁壁守卫 (Guardian)
*不动如山，擅长防御反击与护甲恢复。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **钢铁意志 (Iron Will)** | 普通 | 2 | - | 立刻恢复躯干和头部 15 点护甲值。 | 紧急维护关键部位。 |
| **格挡 (Block)** | 普通 | 2 | - | [Buff] 本回合受到的下一次伤害减少 50%。 | 预判敌人的高伤单体技能。 |
| **挑衅 (Taunt)** | 普通 | 1 | - | [Debuff] 敌人下回合造成的伤害降低 10%。 | 低费减伤，填充 AP 间隙。 |
| **尖刺防御 (Spiked Shell)** | 稀有 | 3 | 格挡 | [Buff] 获得反伤状态 2 回合：近战攻击你的敌人每次受到 15 点物理伤害。 | 针对高频低伤的近战敌人。 |
| **重整旗鼓 (Regroup)** | 稀有 | 3 | 钢铁意志 | 恢复所有肢体 (四肢) 10 点护甲值，并解除流血状态。 | 应对 AOE 磨血和 Dot 伤害。 |
| **反击姿态 (Counter Stance)** | 卓越 | 3 | 尖刺防御 | [Buff] 本回合若成功闪避或格挡了攻击，立即对攻击者发动一次 100% 伤害的反击。 | 防守反击的核心组件。 |
| **无谓挣扎 (Futile Struggle)** | 卓越 | 3 | 挑衅 | [Debuff] 目标造成的伤害如果被护甲完全抵消，则其自身 AP -1 (持续 2 回合)。 | 惩罚低穿透力的敌人。 |
| **盾墙 (Shield Wall)** | 史诗 | 5 | 重整旗鼓 | [Buff] 本回合护甲值视为由所有部位共享 (分摊伤害)，且下回合 AP +3。 | 牺牲本回合换取下回合的爆发。 |
| **不朽壁垒 (Immortal Bastion)** | 史诗 | 4 | 反击姿态 | [Buff] 2 回合内，护甲无法被破坏 (最低保持为 1)。 | 防止破甲后的暴击或真实伤害。 |
| **绝对防御 (Aegis)** | 传说 | 5 | 盾墙 | [Buff] 本回合免疫所有伤害，并将其转化为等量的 HP 治疗。 | 扭转局势的神技。 |

#### 流派 C: 猩红剑术 (Duelist)
*刀刀见血，依靠流血与精准暴击收割敌人。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **血管切割 (Artery Slice)** | 普通 | 2 | - | 攻击四肢。造成伤害的同时施加 [流血 I] (5 dmg/turn, 3 turns)。 | 基础叠 Dot 手段。 |
| **二连刺 (Double Thrust)** | 普通 | 2 | - | 快速攻击两次，每次造成 60% 伤害。随机选择部位。 | 快速叠加攻击特效。 |
| **佯攻 (Feint)** | 普通 | 1 | - | [Buff] 自身下一次攻击必定命中，且无视 15% 护甲。 | 辅助高伤技能，对抗高闪避敌人。 |
| **放血 (Bloodletting)** | 稀有 | 3 | 血管切割 | 攻击躯干。如果敌人已有流血状态，流血层数 +1，并刷新持续时间。 | 维持并加深伤口。 |
| **剑舞 (Blade Dance)** | 稀有 | 3 | 二连刺 | 对随机部位发动 3 次攻击，每次造成 50% 伤害。若全部命中，自身速度 +3。 | 叠流血并提升自身机动性。 |
| **弱点突刺 (Precision Thrust)** | 卓越 | 3 | 佯攻 | 必定暴击 (1.5x)。只能攻击护甲已破损的部位。 | 针对性收割。 |
| **鲜血渴望 (Bloodthirst)** | 卓越 | 2 | 放血 | [Passive Buff] 2 回合内，每当流血效果造成伤害，自身回复 5 点 HP。 | 续航手段，吸血流核心。 |
| **血腥收割 (Bloody Harvest)** | 史诗 | 3 | 鲜血渴望 | 攻击敌人。若敌人处于流血状态，造成额外 50% 伤害，并结算其剩余流血伤害的 50%。 | 引爆 Dot 造成爆发伤害。 |
| **猩红终结 (Crimson Finale)** | 史诗 | 4 | 剑舞 | 移除目标所有流血层数。每移除一层，造成 30 点真实伤害。 | Dot 流派的终结技。 |
| **千刃风暴 (Thousand Cuts)** | 传说 | 5 | 血腥收割 | 对目标进行 10 次微量攻击，每次攻击有 20% 概率施加一层 [流血 I]。 | 瞬间叠满流血层数。 |

---

### 3.2 远程系 (Ranged Arts)

#### 流派 D: 极速游侠 (Ranger)
*天下武功唯快不破，利用高频攻击压制敌人。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **连珠箭 (Quick Shot)** | 普通 | 1 | - | 造成 50% 伤害。不仅低费，而且不占用每回合“仅限一次攻击技能”的限制 (如有)。 | 倾泻多余 AP。 |
| **快步 (Quick Step)** | 普通 | 0 | - | [CD: 3] 本回合速度 +10。 | 抢先手，或触发速度差增益。 |
| **牵制射击 (Distract Shot)** | 普通 | 2 | - | 造成 80% 伤害，并有 25% 概率使目标下回合 AP -1。 | 骚扰敌人节奏。 |
| **战术翻滚 (Tactical Roll)** | 稀有 | 2 | 快步 | [Buff] 闪避率提升 30%，且下一次攻击技能 AP 消耗 -1。 | 调整位置，攻防转换。 |
| **疾风箭 (Wind Arrow)** | 稀有 | 3 | 连珠箭 | 必定先手 (Priority +1)。如果比敌人先行动，造成 180% 伤害。 | 利用高速度优势打爆发。 |
| **毒液涂层 (Poison Coating)** | 卓越 | 2 | 牵制射击 | [Buff] 本回合内，所有远程攻击附带 [中毒 I] (叠层)。 | 配合多段射击技能瞬间叠毒。 |
| **肾上腺素 (Adrenaline)** | 卓越 | 0 | 战术翻滚 | 立即获得 2 点 AP，但下回合 AP 上限 -2。 | 透支未来 AP 进行当前爆发。 |
| **极速连击 (Rapid Fire)** | 史诗 | 4 | 疾风箭 | 射出 5 支箭，每支造成 40% 伤害，随机分配给未被破坏的部位。 | 类似于近战的千刃，针对远程。 |
| **残影 (Afterimage)** | 史诗 | 4 | 肾上腺素 | [Buff] 闪避率提升 60%，持续 2 回合。闪避成功时回复 1 AP。 | 极高的生存能力与资源回复。 |
| **时空扭曲 (Time Warp)** | 传说 | 6 | 残影 | 立即获得一个新的回合 (Extra Turn)，但该额外回合只有一半的 AP 上限。 | 极其强大的战术技能。 |

#### 流派 E: 精密狙击 (Sniper)
*一击必杀，专注于穿透与弱点打击。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **弱点标记 (Mark Target)** | 普通 | 2 | - | [Debuff] 标记敌人某个部位，使该部位受到的伤害增加 30% (2回合)。 | 引导伤害，辅助集火。 |
| **稳固瞄准 (Steady Aim)** | 普通 | 2 | - | [Buff] 自身命中率 +20%，暴击率 +10%。持续到下一次攻击结束。 | 磨刀不误砍柴工。 |
| **膝盖射击 (Knee Shot)** | 普通 | 2 | - | 攻击腿部。若造成 HP 伤害，敌人速度 -5 (持续 3 回合)。 | 限制敌人机动性。 |
| **致残射击 (Crippling Shot)** | 稀有 | 3 | 膝盖射击 | 攻击四肢。造成伤害后，使该部位功能失效 (攻击力降低或移动受限)。 | 软控场。 |
| **远程拆解 (Disarm)** | 稀有 | 3 | 弱点标记 | 对手臂造成 200% 的护甲伤害。若护甲被破，敌人攻击力 -30% (1回合)。 | 针对高攻敌人。 |
| **穿甲射击 (Piercing Bolt)** | 卓越 | 3 | 稳固瞄准 | 无视目标 50% 的护甲值直接造成伤害。 | 对抗重甲单位的标准手段。 |
| **爆头 (Headshot)** | 卓越 | 4 | 远程拆解 | 对头部造成 200% 伤害。命中率修正 -20%，但若命中必定暴击。 | 高风险高回报。 |
| **幽灵狙击 (Ghost Snipe)** | 史诗 | 4 | 爆头 | [无法闪避] 且无视 100% 护甲，但也无法暴击。造成固定 150% 面板伤害。 | 稳定且致命的真实伤害。 |
| **鹰眼 (Eagle Eye)** | 史诗 | 3 | 穿甲射击 | [Passive Buff] 接下来的 3 回合，你的攻击不再受距离惩罚，且最小伤害值提升。 | 提升输出稳定性。 |
| **致命一击 (One Shot One Kill)** | 传说 | 6 | 幽灵狙击 | [蓄力] 需要上一回合未使用攻击技能。对目标造成当前 HP 50% 的伤害 (Boss 效果减半)。 | 针对血牛型敌人的终极手段。 |

---

### 3.3 魔法系 (Arcane Arts)

#### 流派 F: 元素毁灭 (Elementalist)
*掌控冰火雷电，大范围杀伤与状态控制。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **火球术 (Fireball)** | 普通 | 4 | - | 对目标造成火焰伤害并施加 [燃烧] (10 dmg/turn, 无视护甲)。 | 基础高伤魔法。 |
| **闪电箭 (Lightning Bolt)** | 普通 | 2 | - | 造成 1-30 点随机雷电伤害。若造成最大值，返还 1 AP。 | 赌狗技能，用于补刀。 |
| **燃油投掷 (Oil Slick)** | 普通 | 2 | - | 使敌人获得 [易燃] 状态。火属性伤害对该目标必定暴击并延长燃烧时间。 | 元素反应启动技。 |
| **冰锥术 (Ice Lance)** | 稀有 | 3 | 火球术 | 造成冰霜伤害，无视 20% 护甲，并有 25% 概率 [冰冻] 敌人。 | 兼顾穿透与控制。 |
| **火焰之环 (Ring of Fire)** | 稀有 | 3 | 燃油投掷 | 对自身周围造成 AOE 火焰伤害，自身受到少量反噬伤害。 | 近身防御手段。 |
| **冰霜新星 (Frost Nova)** | 卓越 | 3 | 冰锥术 | 对敌人所有部位造成冷冻伤害，并强制敌人本回合无法使用 AP > 3 的技能。 | 关键时刻封锁敌人大招。 |
| **过载 (Overload)** | 卓越 | 0 | 闪电箭 | 消耗 20% 当前 HP，本回合魔法伤害提升 50%。 | 爆发前置，以血换蓝。 |
| **闪电链 (Chain Lightning)** | 史诗 | 4 | 过载 | 对敌人随机 3 个部位造成雷电伤害。若目标 [潮湿] 或穿戴金属盔甲，伤害 +50%。 | 对抗金属怪物的利器。 |
| **暴风雪 (Blizzard)** | 史诗 | 5 | 冰霜新星 | 引导 1 回合，下回合对敌人所有部位造成 3 段冰霜伤害，每段都有高概率冻结敌人。 | 强力控场 AOE。 |
| **陨石术 (Meteor Swarm)** | 传说 | 6 | 暴风雪 | [延迟] 下回合开始时，一颗陨石砸向战场，对敌人所有部位造成毁灭性火伤并大幅削减护甲。 | 改变战场局势的终极魔法。 |

#### 流派 G: 神圣祝祷 (Cleric)
*光明的代言人，拥有最强的生存与恢复能力。*

| 技能名称 | 稀有度 | AP | 前置技能 | 效果描述 | 战术用途 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **圣光术 (Holy Light)** | 普通 | 3 | - | 恢复自身 30 点 HP。 | 基础治疗。 |
| **惩击 (Smite)** | 普通 | 2 | - | 对敌人造成神圣伤害。如果敌人是亡灵/恶魔，伤害翻倍。 | 针对特定种族的输出。 |
| **祝福 (Bless)** | 普通 | 2 | - | [Buff] 自身下回合命中率 +20%，闪避率 +10%。 | 润滑剂，提升稳定性。 |
| **信仰之盾 (Shield of Faith)** | 稀有 | 3 | 圣光术 | 增加 20 点临时护甲，且每回合结束时若护甲未破，回复 5 点 HP。 | 持续防御与缓回。 |
| **痛苦压制 (Pain Suppression)** | 稀有 | 3 | 祝福 | [Buff] 受到的所有伤害减少 30%，持续 3 回合。 | 强力减伤。 |
| **净化之火 (Cleansing Fire)** | 卓越 | 3 | 惩击 | 解除自身所有 Debuff，每解除一个，回复 15 点 HP 并对敌人造成等量伤害。 | 攻守兼备的解控技。 |
| **神圣震击 (Holy Shock)** | 卓越 | 3 | 信仰之盾 | 对敌人造成伤害，同时治疗自己等量的生命值。 | 瞬间拉开血量差。 |
| **天使守护 (Guardian Angel)** | 史诗 | 5 | 痛苦压制 | [Buff] 2 回合内，生命值无法低于 1。效果结束后回复 20% 最大 HP。 | 绝对的免死金牌。 |
| **光辉复苏 (Radiant Revitalize)** | 史诗 | 4 | 净化之火 | 移除所有 Debuff，并回复大量 HP 和少量护甲。 | 自身重置状态。 |
| **神之化身 (Avatar of Divinity)** | 传说 | 6 | 天使守护 | 变身 3 回合：免疫控制，全属性大幅提升，每回合自动释放一次免费的 [圣光术]。 | 究极形态。 |

---

## 4. 技能设计约束 (Design Constraints)

本章节明确了在设计新技能时必须遵守的核心规则，以确保游戏的策略深度与数值平衡。

### 4.1 技能平衡性 (Game Balance)
*   **避免数值碾压**: 技能的强度模型应符合 `强度 = AP消耗 * 稀有度系数` 的基本公式。避免设计出低费高伤且无副作用的技能。
*   **风险与回报**: 高回报技能必须伴随高风险（如自伤、降低防御、下回合行动受限）或高门槛（如苛刻的触发条件、极高的 AP 消耗）。
*   **针对性**: 强力技能应有明显的短板（例如破甲技能对无甲单位低效，单体爆发技能无 AOE 能力），避免出现“万金油”式的无脑最优解。

### 4.2 行动力消耗与策略 (AP & Strategy)
*   **资源管理**: 技能设计应迫使玩家在“当前爆发”与“留存 AP”之间做选择。
*   **低费技能的价值**: 0-1 AP 的技能不应只是填充物，而应具备调整节奏、触发特效或补刀的功能。
*   **高费技能的代价**: 4+ AP 的技能一旦被打断或未命中，应给玩家带来沉重的战术挫败感，因此其收益必须足够诱人。

### 4.3 频率限制 (Usage Frequency)
*   **单回合单次使用**: 核心规则限定 **同名主动技能每回合只能使用一次**。
    *   *设计意图*: 鼓励玩家组建多样化的技能 Build，而不是复读同一个最优技能。
    *   *冷却时间 (CD)*: 对于极强力的技能 (如无敌、全屏 AOE)，除 AP 消耗外，还应设计额外的 CD (2-4 回合) 以防止连续爆发。

### 4.4 机制禁区 (Mechanical Constraints)
*   **不仅限于数值**: 任何 **"回复 AP"** 的技能，其净收益应严格控制，避免无限连动。
*   **实时性剥离**: 不支持 QTE、蓄力条等即时反应机制，保持回合制纯粹的策略规划。
*   **状态控制**: 避免永久硬控 (Perma-Stun)，控制类技能必须有递减机制或免疫期。

### 4.5 游戏特性适配约束 (Game Specific Constraints)
*   **AOE 的重新定义 (Area of Effect in 1v1)**
    *   *背景*: 本游戏采用 1v1 决斗机制 (Duel)，不存在“多名敌人”的概念。
    *   *约束*: 所有的 **AOE (范围伤害)** 技能，其作用对象不是多个单位，而是 **单一目标的所有身体部位** (All Parts)。
    *   *设计*: 例如 "暴风雪" 技能，效果是对敌人的 [头、胸、四肢] 同时造成伤害。这类技能通常用于快速剥离敌人全身护甲，或施加全局 Debuff。
*   **无队友机制 (Solo Combat)**
    *   *背景*: 玩家全程单人作战。
    *   *约束*: 移除所有依赖队友的技能设计。
    *   *设计*: 所有 **辅助/治疗** 技能的目标强制为 **自身 (Self)**。不存在“复活队友”、“光环共享”等机制。
*   **部位依赖与破坏 (Limb Dependency)**
    *   *背景*: 敌人的身体部位会被破坏 (Broken)。
    *   *约束*: 技能在规划阶段 (Planning Phase) 锁定的部位，在结算阶段 (Execution Phase) 可能已经不存在或已损坏。
    *   *设计*: 
        *   **如果目标是特定部位**: 若该部位在技能判定前损毁，技能应 **默认转移至躯干 (Chest)** 或 **判定为丢失 (Miss)** (根据技能类型决定，如精密射击可能Miss，狂乱挥砍则转移)。
        *   **如果目标是全身**: 即使部分部位损毁，技能仍对剩余完好部位生效。

---

## 5. 技能获取与成长系统 (Skill Acquisition & Progression)

本章节详细描述从随机获取模式转型为 **知识点天赋树 (Talent Tree)** 模式的设计方案。

### 5.1 核心资源：知识点 (Knowledge Points - KP)

*   **定义**: 玩家通过冒险获得的用于解锁技能的专用货币。
*   **获取途径**:
    *   **关卡胜利**: 每次战斗胜利获得一定数量 KP (例如: 普通关卡 +1, 精英 +2, boss +5)。
    *   **升级**: 角色等级提升时获得 KP。
    *   **特殊事件**: 某些随机事件可提供额外 KP。

### 5.2 天赋树机制 (Talent Tree Mechanism)

技能不再通过随机三选一获取，而是通过 **天赋面板 (Talent Panel)** 主动解锁。

*   **流派独立**: 7 个流派 (重装、铁壁、剑术等) 各自拥有一条独立的天赋树。
*   **解锁条件 (Unlock Requirements)**:
    1.  **资源足够**: 拥有足够的 KP (Common: 1, Uncommon: 2, Rare: 3, Epic: 5, Legendary: 8)。
    2.  **前置满足**: 必须已解锁该技能的前置节点 (Root 节点无前置)。
*   **树形结构示例**:
    *   Tier 1 (Common) ---> Tier 2 (Uncommon) ---> Tier 3 (Rare) ...
    *   例如: *重锤挥击* (解锁) -> *野蛮冲撞* (可购买)。

### 5.3 交互设计意图 (Interaction Design)

*   **入口**: 在非战斗状态下 (休息点、整备阶段) 可打开技能书。
*   **视觉表现**: 采用传统的连线树状图。已解锁常亮，可解锁高亮闪烁，不可解锁灰显。
*   **策略性**: 玩家必须规划路径，是在一个流派深耕以获取终极技能，还是多流派兼修以获得更多工具。

### 5.4 可行性分析 (Feasibility Analysis)

针对 "随机三选一" 转向 "天赋树" 的方案评估：

#### 1. 数据结构 (Data Structure)
*   **可行性: 高**
*   **改动**:
    *   `skills.json`: 新增字段 `learningCost` (int) 和 `prerequisites` (array of skill_ids).
    *   `Player` 对象: 新增属性 `knowledgePoints` (int) 和 `unlockedSkills` (Set/List).
    *   兼容性: 现有的 `id` 索引结构非常适合做依赖检查。

#### 2. 界面开发 (UI Development)
*   **可行性: 中**
*   **挑战**: 需要开发一个新的 UI 组件 `UI_SkillTree`。
    *   相比简单的列表，树状图需要处理节点位置 (Layout) 和连线绘制 (Canvas/SVG 或 简单的 CSS border)。
    *   **简化方案**: 如果 Canvas 绘制复杂，可以采用 **分层矩阵 (Tiered Matrix)** 布局，用箭头图标指示前置关系，降低开发成本。

#### 3. 游戏体验 (Gameplay Experience)
*   **影响**: 正向。
*   **分析**: 
    *   即时反馈减少 (战斗后没有直接技能奖励)，但长期规划感增强。
    *   符合 WoW 风格的 RPG 深度。
    *   **风险**: 早期如果不给足够的 KP，玩家可能觉得技能太少。需要仔细调整 KP 投放节奏。

#### 4. 结论 (Conclusion)
该方案 **技术上完全可行**，且能显著提升游戏的 RPG 养成深度。建议优先实施 **数据层改造** 和 **基础 UI (简化版树状图)**。

## 6. 技能-Buff 追溯表 (Traceability)

为了确保技能系统与 Buff 系统的紧密集成，下表列出了技能与其触发/依赖的 Buff 的对应关系。请参考 `buff_design.md` 获取 Buff 的详细定义。

| 技能名称 (Skill Name) | 关联 Buff ID | 说明 |
| :--- | :--- | :--- |
| **Artery Slice (血刃切割)** | `buff_bleed` | 施加流血 |
| **Thousand Cuts (千刀风暴)** | `buff_bleed` | 施加流血 |
| **Bloody Harvest (血腥收割)** | `buff_bleed` | 依赖流血结算伤害 |
| **Crimson Finale (猩红终结)** | `buff_bleed` | 移除流血造成伤害 |
| **Fireball (火球术)** | `buff_burn` | 施加燃烧 |
| **Oil Slick (燃烧投掷)** | `buff_burn` | 延长燃烧 |
| **Poison Coating (毒液涂层)** | `buff_poison_coat`, `buff_poison` | 自身获得涂血Buff，后续攻击施加中毒 |
| **Shield Bash (盾牌猛击)** | `buff_stun` | 施加眩晕 |
| **Headbutt (蛮牛头槌)** | `buff_stun` | 施加眩晕 |
| **Earthquake (地震波)** | `buff_stun` | 概率施加眩晕 |
| **Ice Lance (冰锥术)** | `buff_freeze` | 概率施加冻结 |
| **Blizzard (暴风雪)** | `buff_freeze` | 概率施加冻结 |
| **Shockwave (震荡波)** | `buff_slow` | 施加减速 |
| **Knee Shot (膝盖射击)** | `buff_slow` | 施加减速 |
| **Frost Nova (冰霜新星)** | `buff_slow` | 施加减速 |
| **Taunt (嘲讽)** | `buff_weakness` | 降低目标伤害 (Weakness) |
| **Disarm (远程缴械)** | `buff_weakness` | 降低目标伤害 |
| **Mark Target (标记目标)** | `buff_vulnerable` | 增加目标受到的伤害 |
| **Crippling Shot (致残射击)** | `buff_silence_limb` | 沉默特定部位 |
| **Berserk (狂暴姿态)** | `buff_berserk` | 自身狂暴 |
| **Steady Aim (稳固瞄准)** | `buff_focus` | 自身专注 |
| **Overload (魔力过载)** | `buff_magic_surge` | 自身魔力涌动 |
| **Eagle Eye (鹰眼)** | `buff_eagle_eye` | 自身被动Buff |
| **Feint (佯攻)** | `buff_armor_pen` | 自身Next Attack穿透 |
| **Bless (祝福)** | `buff_bless` | 自身属性提升 |
| **Iron Will (钢铁意志)** | `buff_iron_will` | 自身防御提升 |
| **Block (格挡)** | `buff_block` | 自身减伤 |
| **Pain Suppression (痛苦压制)** | `buff_pain_sup` | 自身减伤 |
| **Tactical Roll (战术翻滚)** | `buff_evasion`, `buff_ap_regen` | 自身闪避提升，回复AP |
| **Afterimage (残影)** | `buff_evasion` | 自身高闪避 |
| **Guardian Angel (天使护佑)** | `buff_immortality_hp` | 锁血 |
| **Immortal Bastion (不朽堡垒)** | `buff_immortality_armor` | 锁护甲 |
| **Shield of Faith (信仰之盾)** | `buff_shield` | 护盾 |
| **Radiant Revitalize (光愿复苏)** | `buff_revive` | 复活 |
| **Shield Wall (盾墙)** | `buff_shield_wall` | 共享护甲/AP增加 |
| **Spiked Shell (荆棘甲壳)** | `buff_thorns` | 反伤 |
| **Counter Stance (反击姿态)** | `buff_counter` | 闪避反击 |
| **Bloodthirst (嗜血欲望)** | `buff_lifesteal` | 自身吸血 |
| **Holy Shock (神圣震击)** | `buff_lifesteal` | 造成伤害并治疗 (吸血机制) |
| **Adrenaline (肾上腺素)** | `buff_ap_regen` | 恢复 AP |
| **Aegis (圣盾反击)** | `buff_damage_absorb` | 吸收伤害转治疗 |
