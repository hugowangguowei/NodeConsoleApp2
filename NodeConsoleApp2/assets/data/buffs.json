{
    "buff_poison": {
        "id": "buff_poison",
        "name": "中毒",
        "description": "持续伤害：每回合结束时对自身造成最大生命值 5% 的伤害（可叠加，刷新持续时间）。",
        "type": "debuff",
        "tags": [
            "poison",
            "dot"
        ],
        "lifecycle": {
            "duration": 3,
            "maxStacks": 5,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTurnEnd",
                "action": "damage",
                "value": "maxHp * 0.05",
                "valueType": "formula",
                "target": "self"
            }
        ]
    },
    "buff_stun": {
        "id": "buff_stun",
        "name": "晕眩",
        "description": "控制：回合开始时跳过本回合行动（持续 1 回合）。",
        "type": "debuff",
        "tags": [
            "control"
        ],
        "lifecycle": {
            "duration": 1,
            "maxStacks": 1,
            "stackStrategy": "replace",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTurnStart",
                "action": "skipTurn",
                "target": "self"
            }
        ]
    },
    "buff_strength": {
        "id": "buff_strength",
        "name": "力量增强",
        "description": "属性增益：攻击力 +5（flat），可叠加 3 层，刷新持续时间。",
        "type": "buff",
        "tags": [
            "stat_up"
        ],
        "lifecycle": {
            "duration": 3,
            "maxStacks": 3,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "atk": {
                "value": 5,
                "type": "flat"
            }
        }
    },
    "buff_shield": {
        "id": "buff_shield",
        "name": "护盾",
        "description": "护盾：抵挡一次伤害（一次性）。",
        "type": "buff",
        "tags": [
            "defense"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 1,
            "stackStrategy": "replace",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTakeDamagePre",
                "action": "setDamageTaken",
                "value": 0,
                "valueType": "overwrite",
                "target": "self"
            },
            {
                "trigger": "onTakeDamagePre",
                "action": "REMOVE_SELF",
                "target": "self"
            }
        ]
    },
    "buff_bleed": {
        "id": "buff_bleed",
        "name": "流血",
        "description": "持续伤害：每回合开始时对自身造成 5 点流血伤害（可叠加，刷新持续时间）。",
        "type": "debuff",
        "tags": [
            "physical",
            "dot"
        ],
        "lifecycle": {
            "duration": 3,
            "maxStacks": 5,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTurnStart",
                "action": "damage",
                "value": 5,
                "valueType": "flat",
                "target": "self"
            }
        ]
    },
    
    "buff_slow": {
        "id": "buff_slow",
        "name": "减速",
        "description": "减益：速度 -5（flat），可叠加 3 层，刷新持续时间。",
        "type": "debuff",
        "tags": [
            "control",
            "speed_down"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 3,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "speed": {
                "value": -5,
                "type": "flat"
            }
        }
    },
    "debuff_weak": {
        "id": "debuff_weak",
        "name": "虚弱",
        "description": "减益：攻击力降低（atk -20%）。",
        "type": "debuff",
        "tags": [
            "weakness"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "atk": {
                "value": -0.2,
                "type": "percent"
            }
        }
    },
    "buff_vulnerable": {
        "id": "buff_vulnerable",
        "name": "易伤",
        "description": "减益：受到的伤害提高（damageTakenMult +20%），可叠加 3 层。",
        "type": "debuff",
        "tags": [
            "vulnerable"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 3,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "damageTakenMult": {
                "value": 0.2,
                "type": "percent"
            }
        }
    },
    
    "buff_armor_pen": {
        "id": "buff_armor_pen",
        "name": "破甲",
        "description": "下一次攻击削弱目标护甲减免（通过 onAttackPre 写入 armorMitigationMult 临时修正，随后消耗自我）。",
        "type": "buff",
        "tags": [
            "offensive"
        ],
        "lifecycle": {
            "duration": 1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        
        "effects": [
            {
                "trigger": "onAttackPre",
                "action": "MODIFY_STAT_TEMP",
                "target": "target",
                "params": {
                    "stat": "armorMitigationMult",
                    "value": "+0.3",
                    "type": "percent_current"
                }
            },
            {
                "trigger": "onAttackPost",
                "action": "REMOVE_SELF",
                "target": "self"
            }
        ]
    },
    "buff_bless": {
        "id": "buff_bless",
        "name": "祝福",
        "description": "增益：命中率 +0.2，闪避率 +0.1。",
        "type": "buff",
        "tags": [
            "divine"
        ],
        "lifecycle": {
            "duration": 3,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "hitRate": {
                "value": 0.2,
                "type": "flat"
            },
            "dodgeRate": {
                "value": 0.1,
                "type": "flat"
            }
        }
    },
    
    "buff_block": {
        "id": "buff_block",
        "name": "格挡",
        "description": "减伤：受到伤害前将伤害乘以 0.5（持续 1 回合）。",
        "type": "buff",
        "tags": [
            "defense"
        ],
        "lifecycle": {
            "duration": 1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTakeDamagePre",
                "action": "modifyDamageTaken",
                "value": 0.5,
                "valueType": "mult",
                "target": "self"
            }
        ]
    },
    "buff_pain_sup": {
        "id": "buff_pain_sup",
        "name": "痛苦压制",
        "description": "减伤：受到的伤害降低（damageTakenMult -30%）。",
        "type": "buff",
        "tags": [
            "defense",
            "divine"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "damageTakenMult": {
                "value": -0.3,
                "type": "percent"
            }
        }
    },
    "buff_evasion": {
        "id": "buff_evasion",
        "name": "残影",
        "description": "增益：抵挡 1 次伤害（一次性）。",
        "type": "buff",
        "tags": [
            "defense",
            "speed"
        ],
        "lifecycle": {
            "duration": 1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTakeDamagePre",
                "action": "setDamageTaken",
                "value": 0,
                "valueType": "overwrite",
                "target": "self"
            },
            {
                "trigger": "onTakeDamagePre",
                "action": "REMOVE_SELF",
                "target": "self"
            }
        ]
    },
    "buff_immortality_armor": {
        "id": "buff_immortality_armor",
        "name": "绝对防御",
        "type": "buff",
        "tags": [
            "defense"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "description": "护甲无法被破坏",
        "tbd": {
            "reason": "需要护甲伤害/破坏管线支持（按部位）",
            "proposed": {
                "effects": [
                    {
                        "trigger": "onTakeDamagePre",
                        "action": "preventArmorBreak",
                        "target": "self"
                    }
                ]
            }
        }
    },
    "buff_shield_wall": {
        "id": "buff_shield_wall",
        "name": "盾墙",
        "description": "增益：大幅增加最大行动点数（maxAp +3）。",
        "type": "buff",
        "tags": [
            "defense",
            "team"
        ],
        "lifecycle": {
            "duration": 2,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "maxAp": {
                "value": 3,
                "type": "flat"
            }
        }
    },
    "buff_thorns": {
        "id": "buff_thorns",
        "name": "荆棘",
        "description": "反伤：防御结算后对攻击者造成其本次造成伤害的 30%。",
        "type": "buff",
        "tags": [
            "defense",
            "reflect"
        ],
        "lifecycle": {
            "duration": 3,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onDefendPost",
                "action": "damage",
                "value": "damageTaken * 0.3",
                "valueType": "formula",
                "target": "attacker"
            }
        ]
    },
    "buff_counter": {
        "id": "buff_counter",
        "name": "反击姿态",
        "description": "反击姿态：防御结算后对攻击者发起一次攻击（需 CombatSystem 支持），并大幅提高闪避。",
        "type": "buff",
        "tags": [
            "offensive",
            "defense"
        ],
        "lifecycle": {
            "duration": 1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "dodgeRate": {
                "value": 1.0,
                "type": "flat"
            }
        },
        "effects": [
            {
                "trigger": "onDefendPost",
                "action": "attack",
                "target": "attacker"
            }
        ]
    },
    "buff_lifesteal": {
        "id": "buff_lifesteal",
        "name": "吸血",
        "type": "buff",
        "tags": [
            "offensive",
            "vampire"
        ],
        "lifecycle": {
            "duration": -1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "aliasOf": "passive_vampire"
    },
    "buff_ap_regen": {
        "id": "buff_ap_regen",
        "name": "战斗恢复",
        "type": "buff",
        "tags": [
            "utility"
        ],
        "lifecycle": {
            "duration": 3,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTurnStart",
                "action": "modifyAP",
                "value": 1,
                "target": "self"
            }
        ]
    },
    "buff_damage_absorb": {
        "id": "buff_damage_absorb",
        "name": "圣盾",
        "description": "TBD：吸收本次受到的伤害并转化为治疗（需要 absorbToHeal 管线支持）。",
        "type": "buff",
        "tags": [
            "defense",
            "divine"
        ],
        "lifecycle": {
            "duration": 1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "effects": [
            {
                "trigger": "onTakeDamagePre",
                "action": "absorbToHeal",
                "target": "self"
            }
        ]
    },
    "passive_heavy_armor": {
        "id": "passive_heavy_armor",
        "name": "重甲负重",
        "description": "装备被动：速度 -5。",
        "type": "hidden",
        "tags": [
            "equipment"
        ],
        "lifecycle": {
            "duration": -1,
            "maxStacks": 1,
            "stackStrategy": "refresh",
            "removeOnBattleEnd": true
        },
        "statModifiers": {
            "speed": {
                "value": -5,
                "type": "flat"
            }
        }
    }
}